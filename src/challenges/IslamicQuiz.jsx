import React, { useState, useEffect } from 'react';
import Card from '@mui/material/Card';
import CardContent from '@mui/material/CardContent';
import Typography from '@mui/material/Typography';
import Button from '@mui/material/Button';
import Box from '@mui/material/Box';
import Grid from '@mui/material/Grid';
import Fade from '@mui/material/Fade';
import Divider from '@mui/material/Divider';
import { FaQuran, FaUserTie, FaBook, FaMosque, FaPrayingHands, FaUsers, FaStarAndCrescent, FaFemale, FaHistory, FaRandom } from 'react-icons/fa';
import { MdOutlineQuiz } from 'react-icons/md';
import ButtonGroup from '@mui/material/ButtonGroup';
import { useNavigate } from 'react-router-dom';
import { useContext } from 'react';
import { ChallengeContext } from '../context/ChallengeContext';

// ุฏุงูุฉ ูุชุฑุชูุจ ุงูุงุฎุชูุงุฑุงุช ุนุดูุงุฆููุง
const shuffleOptions = (options, correctAnswer) => {
  const shuffled = [...options];
  for (let i = shuffled.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
  }
  // ุฅุนุงุฏุฉ ุญุณุงุจ ุงูุฅุฌุงุจุฉ ุงูุตุญูุญุฉ ุจุนุฏ ุงูุชุฑุชูุจ ุงูุนุดูุงุฆู
  const newAnswer = shuffled.indexOf(options[correctAnswer]);
  return { options: shuffled, answer: newAnswer };
};

// ุฏุงูุฉ ูุฅูุดุงุก ุณุคุงู ูุน ุงุฎุชูุงุฑุงุช ุนุดูุงุฆูุฉ
const createShuffledQuestion = (question, options, correctAnswer, explanation) => {
  const shuffled = shuffleOptions(options, correctAnswer);
  return {
    type: 'mcq',
    question,
    options: shuffled.options,
    answer: shuffled.answer,
    explanation
  };
};

// ุฃูุณุงู ุงููุณุงุจูุฉ
const quizSections = [
  { key: 'aqeedah', label: 'ุงูุนููุฏุฉ ูุงูุชูุญูุฏ', icon: <FaMosque size={24} color="#1976d2" /> },
  { key: 'seerah', label: 'ุงูุณูุฑุฉ ุงููุจููุฉ', icon: <FaUserTie size={24} color="#388e3c" /> },
  { key: 'quran', label: 'ุงููุฑุขู ุงููุฑูู', icon: <FaQuran size={24} color="#fbc02d" /> },
  { key: 'hadith', label: 'ุงูุฃุญุงุฏูุซ ุงููุจููุฉ', icon: <FaBook size={24} color="#8d6e63" /> },
  { key: 'fiqh', label: 'ุงูููู ูุงูุนุจุงุฏุงุช', icon: <FaPrayingHands size={24} color="#7b1fa2" /> },
  { key: 'sahabah', label: 'ุงูุตุญุงุจุฉ ูุงูุชุงุจุนูู', icon: <FaUsers size={24} color="#c62828" /> },
  { key: 'ramadan', label: 'ุฑูุถุงู ูุงูุญุฌ', icon: <FaStarAndCrescent size={24} color="#ff9800" /> },
  { key: 'women', label: 'ุงููุฑุฃุฉ ูู ุงูุฅุณูุงู', icon: <FaFemale size={24} color="#e91e63" /> },
  { key: 'history', label: 'ุงูุชุงุฑูุฎ ุงูุฅุณูุงูู', icon: <FaHistory size={24} color="#607d8b" /> },
  { key: 'mix', label: 'ูุชููุน', icon: <FaRandom size={24} color="#009688" /> },
];

// ูุซุงู ุฃุณุฆูุฉ (ูุฌุจ ูุงุญููุง ุฌูุจูุง ูู ูุงุนุฏุฉ ุจูุงูุงุช ุฃู ููู ูุจูุฑ)
const questionsBank = {
  aqeedah: [
    createShuffledQuestion(
      'ูุง ูุนูู ุงูุชูุญูุฏุ',
      ['ุฅูุฑุงุฏ ุงููู ุจุงูุนุจุงุฏุฉ ุฏูู ุดุฑูู', 'ุงูุฅููุงู ุจุงูููุงุฆูุฉ', 'ุงูุตูุงุฉ ููุท', 'ุงูุฒูุงุฉ ููุท'],
      0,
      'ุงูุชูุญูุฏ ูู ุฅูุฑุงุฏ ุงููู ุจุงูุนุจุงุฏุฉ ุฏูู ุดุฑูู.'
    ),
    createShuffledQuestion(
      'ูุง ูู ุงูุดุฑู ุงูุฃูุจุฑุ',
      ['ุฅุดุฑุงู ุฃุญุฏ ููู ูู ุงูุฑุจูุจูุฉ ุฃู ุงูุฃููููุฉ', 'ุนุฏู ุงูุตูุงุฉ', 'ุชุฑู ุงูุฒูุงุฉ', 'ุงูุบูุจุฉ'],
      0,
      'ุงูุดุฑู ุงูุฃูุจุฑ ูู ุฅุดุฑุงู ุฃุญุฏ ููู ูู ุงูุฑุจูุจูุฉ ุฃู ุงูุฃููููุฉ.'
    ),
    createShuffledQuestion(
      'ูู ุงูุฅููุงู ุจุงููุชุงุฆุจ ุงูุฃุฑุจุนุฉ ูู ุฃุฑูุงู ุงูุฅููุงูุ',
      ['ูุนู', 'ูุง', 'ุฌุฒุฆููุง', 'ูุดููู ููู'],
      0,
      'ูุนูุ ุงูุฅููุงู ุจุงููุชุจ ูู ุฃุฑูุงู ุงูุฅููุงู.'
    ),
    createShuffledQuestion(
      'ูุง ุงููุฑู ุจูู ุงูุชูุญูุฏ ุงูุฑุจูุจู ูุงูุชูุญูุฏ ุงูุนุจุงุฏูุ',
      ['ุงูุฑุจูุจู: ุงูุฅููุงู ุจุนูู ุงููู ููุฏุฑุชูุ ุงูุนุจุงุฏู: ุชูุฌูู ุงูุนุจุงุฏุฉ ููู ูุญุฏู', 'ููุงููุง ูุงุญุฏ', 'ุงูุฑุจูุจู: ุงูุตูุงุฉ ููุท', 'ุงูุนุจุงุฏู: ุงูุฒูุงุฉ ููุท'],
      0,
      'ุงูุฑุจูุจู: ุงูุฅููุงู ุจุนูู ุงููู ููุฏุฑุชูุ ุงูุนุจุงุฏู: ุชูุฌูู ุงูุนุจุงุฏุฉ ููู ูุญุฏู.'
    ),
    createShuffledQuestion(
      'ูู ุงูุฏุนุงุก ูุบูุฑ ุงููู ุฑูุงุกุ',
      ['ูุนูุ ููุง ูุตุญ', 'ูุงุ ูุฌูุฒ', 'ูู ุจุนุถ ุงูุญุงูุงุช', 'ูุดููู ููู'],
      0,
      'ูุนูุ ููุง ูุตุญุ ุงูุฏุนุงุก ุฃููู ููู ูุญุฏู.'
    ),
    createShuffledQuestion(
      'ูุง ูุนูู ุงูุฅูุญุงุฏุ',
      ['ุฅููุงุฑ ูุฌูุฏ ุงููู', 'ุงูุฅููุงู ุจุงูููุงุฆูุฉ', 'ุงูุตูุงุฉ ููุท', 'ุงูุฒูุงุฉ ููุท'],
      0,
      'ุงูุฅูุญุงุฏ ูู ุฅููุงุฑ ูุฌูุฏ ุงููู.'
    ),
    createShuffledQuestion(
      'ูู ูู ุงูุดุงูุฏ ุงูุฃุนุธู ุนูู ุงูุชูุญูุฏุ',
      ['ุงูููู ุงูุทุจูุนู ุจุฃุฏูุชู', 'ุงูููุงุฆูุฉ', 'ุงูุฑุณู', 'ุงููุฑุขู'],
      0,
      'ุงูููู ุงูุทุจูุนู ุจุฃุฏูุชู ุดุงูุฏ ุนูู ุงูุชูุญูุฏ.'
    ),
    createShuffledQuestion(
      'ูู ุงูุงุณุชุนุงุฐุฉ ูู ุงูุดูุทุงู ุนุจุงุฏุฉุ',
      ['ูุงุ ูู ุทูุจ ุญูุงูุฉ', 'ูุนูุ ุนุจุงุฏุฉ', 'ูู ุจุนุถ ุงูุญุงูุงุช', 'ูุดููู ููู'],
      0,
      'ูุงุ ูู ุทูุจ ุญูุงูุฉ ูู ุดุฑูุ ููุง ุชูุนุฏ ุดุฑููุง.'
    ),
    createShuffledQuestion(
      'ูุง ูู ุตูุงุช ุงููู ุงูุฎูุณููุ',
      ['ุงูุนูููุ ุงูุญูููุ ุงููุฏูุฑโฆ', 'ุงูุตูุงุฉ ููุท', 'ุงูุฒูุงุฉ ููุท', 'ุงูุตูู ููุท'],
      0,
      'ุตูุงุช ุงููู ูุซู ุงูุนูููุ ุงูุญูููุ ุงููุฏูุฑโฆ ูุน ุชุญุณูููุง ูุชูููุถ ูุนูุงูุง.'
    ),
    createShuffledQuestion(
      'ูู ูุฌูุฒ ุงูููู "ุงููู ูุง ูุนูู ุงูุบูุจ"ุ',
      ['ูุงุ ูุฐุง ุฅููุงุฑ ูุนูู ุงููู', 'ูุนูุ ูุฌูุฒ', 'ูู ุจุนุถ ุงูุญุงูุงุช', 'ูุดููู ููู'],
      0,
      'ูุงุ ูุฐุง ุฅููุงุฑ ูุนูู ุงููู.'
    ),
    createShuffledQuestion(
      'ูุง ูู ุงููุนูู ุงูุตุญูุญ ูุนููุฏุฉ ุงููุฏูุฑุ',
      ['ุฃู ุงููู ุนููู ูููุฏุฑ ุฎูุฑู ูุดุฑู', 'ุงูุตูุงุฉ ููุท', 'ุงูุฒูุงุฉ ููุท', 'ุงูุตูู ููุท'],
      0,
      'ุฃู ุงููู ุนููู ูููุฏุฑ ุฎูุฑู ูุดุฑู.'
    ),
    createShuffledQuestion(
      'ูู ูุคูู ุงููุณูู ุจุงูููุงุฆูุฉุ',
      ['ูุนูุ ูู ุฃุฑูุงู ุงูุฅููุงู', 'ูุง', 'ุฌุฒุฆููุง', 'ูุดููู ููู'],
      0,
      'ูุนูุ ุงูุฅููุงู ุจุงูููุงุฆูุฉ ูู ุฃุฑูุงู ุงูุฅููุงู.'
    ),
    createShuffledQuestion(
      'ูู ุฃูู ูู ุขูู ุจุฑุณูู ุงููู ูู ุงูุฑุฌุงูุ',
      ['ุฃุจู ุจูุฑ ุงูุตุฏูู', 'ุนูู ุจู ุฃุจู ุทุงูุจ', 'ุนูุฑ ุจู ุงูุฎุทุงุจ', 'ุนุซูุงู ุจู ุนูุงู'],
      0,
      'ุฃูู ูู ุขูู ูู ุงูุฑุฌุงู ูู ุฃุจู ุจูุฑ ุงูุตุฏูู.'
    ),
    createShuffledQuestion(
      'ูุง ุงููุฑู ุจูู ุชูุญูุฏ ุงูุฃุณูุงุก ูุงูุตูุงุชุ',
      ['ุงูุงุนุชูุงุฏ ุจุฃุณูุงุก ุงููู ูุตูุงุชู ููุง ูุฑุฏุช ูู ุงููุต ุฏูู ุชุดุจูู ุฃู ุชุนุทูู', 'ุชุดุจูู ุงููู ุจุฎููู', 'ุชุนุทูู ุงูุตูุงุช', 'ุชูุณูุฑ ุงูุตูุงุช ุจุงูุนูู ููุท'],
      0,
      'ุงูุงุนุชูุงุฏ ุจุฃุณูุงุก ุงููู ูุตูุงุชู ููุง ูุฑุฏุช ูู ุงููุต ุฏูู ุชุดุจูู ุฃู ุชุนุทูู.'
    ),
    createShuffledQuestion(
      'ูู ูุฌูุฒ ุตูุน ุชูุงุซููุ',
      ['ููุฑูู ุฃู ูุญุฑู', 'ูุนูุ ูุฌูุฒ', 'ูู ุจุนุถ ุงูุญุงูุงุช', 'ูุดููู ููู'],
      0,
      'ููุฑูู ุฃู ูุญุฑู ุจุญุณุจ ุงูุนุงุฏุฉ ุงูุฅุณูุงููุฉ.'
    ),
    createShuffledQuestion(
      'ูุง ูุนูู ุงูุฅููุงู ุจุงูุบูุจุ',
      ['ุงูุฅููุงู ุจูุง ูุง ููุฏุฑู ุจุงูุญูุงุณ ูุซู ุงูุฌูุฉ ูุงููุงุฑ', 'ุงูุตูุงุฉ ููุท', 'ุงูุฒูุงุฉ ููุท', 'ุงูุตูู ููุท'],
      0,
      'ุงูุฅููุงู ุจูุง ูุง ููุฏุฑู ุจุงูุญูุงุณ ูุซู ุงูุฌูุฉ ูุงููุงุฑ.'
    ),
    createShuffledQuestion(
      'ูู ูุฌูุฒ ุงูุชูุฑุจ ุฅูู ุงููู ุจุงูุฃุถุฑุญุฉุ',
      ['ูุงุ ุฅููุง ุจุฏุนุฉ', 'ูุนูุ ูุฌูุฒ', 'ูู ุจุนุถ ุงูุญุงูุงุช', 'ูุดููู ููู'],
      0,
      'ูุงุ ุฅููุง ุจุฏุนุฉ.'
    ),
    createShuffledQuestion(
      'ูุง ูุนูู ุงูุชูุญูุฏ ุงูุงูุชุตุงุฏูุ',
      ['ุชูููู ุงูุฃููุงู ููู ูุงุณุชุฎุฏุงููุง ูู ุทุงุนุงุชู', 'ุงูุตูุงุฉ ููุท', 'ุงูุฒูุงุฉ ููุท', 'ุงูุตูู ููุท'],
      0,
      'ุชูููู ุงูุฃููุงู ููู ูุงุณุชุฎุฏุงููุง ูู ุทุงุนุงุชู.'
    ),
    createShuffledQuestion(
      'ูู ุงูุตุฏูุฉ ุชุฏูุน ุงูุบุฑุงูุฉุ',
      ['ูุงุ ูุงูุบุฑุงูุฉ ูุงููุฉ ุฎูุงุฑูุฉ', 'ูุนูุ ุชุฏูุน', 'ูู ุจุนุถ ุงูุญุงูุงุช', 'ูุดููู ููู'],
      0,
      'ูุงุ ูุงูุบุฑุงูุฉ ูุงููุฉ ุฎูุงุฑูุฉ ุญุณุจ ุงููุงููู.'
    ),
    createShuffledQuestion(
      'ูุง ุงููุฑู ุจูู ุงูุฅููุงู ูุงูุนููุ',
      ['ุงูุฅููุงู ูู ุงูุงุนุชูุงุฏุ ูุงูุนูู ูู ุงูุซูุฑ ุงููุงุชุฌ ุนูู', 'ุงูุตูุงุฉ ููุท', 'ุงูุฒูุงุฉ ููุท', 'ุงูุตูู ููุท'],
      0,
      'ุงูุฅููุงู ูู ุงูุงุนุชูุงุฏุ ูุงูุนูู ูู ุงูุซูุฑ ุงููุงุชุฌ ุนูู.'
    ),
    createShuffledQuestion(
      'ูุง ูู ุงููุชุงุจ ุงูุฐู ูุคูู ุจู ุงููุณููุ',
      ['ุงููุฑุขู ุงููุฑูู', 'ุงูุฅูุฌูู', 'ุงูุชูุฑุงุฉ', 'ุงูุฒุจูุฑ'],
      0,
      'ุงููุฑุขู ุงููุฑูู ูู ุงููุชุงุจ ุงูุฐู ูุคูู ุจู ุงููุณูู.'
    ),
    createShuffledQuestion(
      'ุฃูููู ุขูุฉ ุฃูุฒูุช ูู ุงููุฑุขูุ',
      ['ุงูุฑุฃ ุจุงุณู ุฑุจู ุงูุฐู ุฎูู', 'ุจุณู ุงููู ุงูุฑุญูู ุงูุฑุญูู', 'ุงูุญูุฏ ููู ุฑุจ ุงูุนุงูููู', 'ูู ูู ุงููู ุฃุญุฏ'],
      0,
      'ุฃูู ุขูุฉ ุฃูุฒูุช: "ุงูุฑุฃ ุจุงุณู ุฑุจู ุงูุฐู ุฎูู".'
    ),
    createShuffledQuestion(
      'ูุง ูุนูู "ูุง ุญูู ููุง ููุฉ ุฅูุง ุจุงููู"ุ',
      ['ุงูุชุณููู ุจุนุฌุฒ ุงูุนุจุฏ ูุงุนุชูุงุฏ ุงููุฏุฑุฉ ููู', 'ุงูุตูุงุฉ ููุท', 'ุงูุฒูุงุฉ ููุท', 'ุงูุตูู ููุท'],
      0,
      'ูุนูุงูุง ุงูุชุณููู ุจุนุฌุฒ ุงูุนุจุฏ ูุงุนุชูุงุฏ ุงููุฏุฑุฉ ููู.'
    ),
    createShuffledQuestion(
      'ูู ุงูุดูุงุนุฉ ุญูุฑ ุนูู ุงููุจู ๏ทบ ููุทุ',
      ['ูุนูุ ุงูุดูุงุนุฉ ุงููุจุฑู ูู', 'ูุงุ ููุฌููุน', 'ูุจุนุถ ุงูุฃูุจูุงุก ููุท', 'ูุจุนุถ ุงูุตุญุงุจุฉ ููุท'],
      0,
      'ุงูุดูุงุนุฉ ุงููุจุฑู ููุจูู ๏ทบ ูุฃุตููุงุฆู ุนูุฏ ุงููู.'
    ),
    createShuffledQuestion(
      'ูู ูุฌูุฒ ุงูุงุณุชูุฌุงุก ูู ุงูุฌูุงุจุฉ ุจุงูุบุณูู ููุทุ',
      ['ูุงุ ูุฌุจ ุบุณู ุงูุฌุณุฏ ุจุงููุงุก', 'ูุนูุ ูุฌูุฒ', 'ูู ุจุนุถ ุงูุญุงูุงุช', 'ูุดููู ููู'],
      0,
      'ูุงุ ูุฌุจ ุบุณู ุงูุฌุณุฏ ุจุงููุงุก.'
    ),
    createShuffledQuestion(
      'ูู ุฃูู ูู ุฏุนุง ุฅูู ุงูุฅุณูุงู ุจุนุฏ ุฎุฏูุฌุฉุ',
      ['ุฃุจู ุจูุฑ ุงูุตุฏูู', 'ุนูู ุจู ุฃุจู ุทุงูุจ', 'ุนูุฑ ุจู ุงูุฎุทุงุจ', 'ุนุซูุงู ุจู ุนูุงู'],
      0,
      'ุฃุจู ุจูุฑ ุงูุตุฏูู ุฃูู ูู ุฏุนุง ุจุนุฏ ุฎุฏูุฌุฉ.'
    ),
    createShuffledQuestion(
      'ูู ุฃูู ูู ูุถุน ุงูููุฒุงู ูููู ุงูููุงูุฉ ุงูุนููุงุกุ',
      ['ูุงุ ูู ูู ุฃุนูุงู ุงูุนุจุงุฏ', 'ูุนูุ ุงูุนููุงุก', 'ูู ุจุนุถ ุงูุญุงูุงุช', 'ูุดููู ููู'],
      0,
      'ูู ูู ุฃุนูุงู ุงูุนุจุงุฏ ุนูู ูุฒู ุฃุนูุงููู.'
    ),
    createShuffledQuestion(
      'ููู ูุนุฑู ุฃู ุงูุฑุณูู ๏ทบ ุจุดุฑ ูููุณ ุฅูููุงุ',
      ['ููุฌูุฏ ููุชู ููุฐุง ูุตูุต ุงููุฑุขู ูุงูุณูุฉ', 'ุงูุตูุงุฉ ููุท', 'ุงูุฒูุงุฉ ููุท', 'ุงูุตูู ููุท'],
      0,
      'ููุฌูุฏ ููุชู ููุฐุง ูุตูุต ุงููุฑุขู ูุงูุณูุฉ.'
    ),
    createShuffledQuestion(
      'ูุง ูุนูู ุงูุนุฏู ุนูุฏ ุงูููุ',
      ['ุฅุนุทุงุก ูู ุฐู ุญู ุญูู', 'ุงูุตูุงุฉ ููุท', 'ุงูุฒูุงุฉ ููุท', 'ุงูุตูู ููุท'],
      0,
      'ุงูุนุฏู ูู ุฅุนุทุงุก ูู ุฐู ุญู ุญูู.'
    ),
    createShuffledQuestion(
      'ูู ูููู ุงูุฅูุณุงู ูู ุงูุฃูุฏุงุฑุ',
      ['ูุงุ ุฅูุง ูุง ุฌุนูู ุงููู ูุงุฏุฑูุง ุนููู', 'ูุนูุ ูู ุดูุก', 'ุฌุฒุฆููุง', 'ูุดููู ููู'],
      0,
      'ูุงุ ุฅูุง ูุง ุฌุนูู ุงููู ูุงุฏุฑูุง ุนููู.'
    ),
    createShuffledQuestion(
      'ูู ูู ููุงู ูููุงู "ุจุณู ุงููู" ููุนุฏ ุชูุญูุฏูุงุ',
      ['ูุงุ ุจู ูุฑูุฏ ุงููุนููุฉ ููุนูู ุฅุฎูุงุตู ููู', 'ูุนูุ ุชูุญูุฏ', 'ูู ุจุนุถ ุงูุญุงูุงุช', 'ูุดููู ููู'],
      0,
      'ูุงุ ุจู ูุฑูุฏ ุงููุนููุฉ ููุนูู ุฅุฎูุงุตู ููู.'
    ),
    createShuffledQuestion(
      'ูุง ุงูููุตูุฏ ุจููุงุฑูุซ ุงููุฑุฃุฉ ูุงูุฑุฌูุ',
      ['ุงูุชูุฒูุน ุงูุดุฑุนู ุจูุงุกู ุนูู ุงููุฑุงุจุฉ ูุงูููุงุนุฏ ุงูููููุฉ', 'ุงูุตูุงุฉ ููุท', 'ุงูุฒูุงุฉ ููุท', 'ุงูุตูู ููุท'],
      0,
      'ุงูุชูุฒูุน ุงูุดุฑุนู ุจูุงุกู ุนูู ุงููุฑุงุจุฉ ูุงูููุงุนุฏ ุงูููููุฉ.'
    ),
    createShuffledQuestion(
      'ููู ูุซุจุช ุงูุฅููุงู ุจุงูุฑุณู ุฌููุนูุงุ',
      ['ุงููุจูู ุจุฌููุน ุงูุฑุณู ุฅููุงู', 'ุจุนุถ ุงูุฑุณู ููุท', 'ุฌุฒุฆููุง', 'ูุดููู ููู'],
      0,
      'ุงููุจูู ุจุฌููุน ุงูุฑุณู ุฅููุงู.'
    ),
    createShuffledQuestion(
      'ูู ุฃุตูู ุงูุฏูู ุฃุฑูุงู ุดุฑุนูุฉุ',
      ['ูุงุ ุฃุฑูุงู ุงูุฅููุงู', 'ูุนูุ ุฃุฑูุงู ุดุฑุนูุฉ', 'ุฌุฒุฆููุง', 'ูุดููู ููู'],
      0,
      'ุฃุตูู ุงูุฏูู ุฃุฑูุงู ุงูุฅููุงูุ ูููุณุช ุฑูููุง ูู ุฃุฑูุงู ุงูุฅุณูุงู.'
    ),
    createShuffledQuestion(
      'ูุง ูุนูู ุงูููู ุจุงูุชูููุถุ',
      ['ุชุฑู ููู ุตูุงุช ุงููู ูุญููู ุจูุง ุชุนุทูู', 'ุงูุตูุงุฉ ููุท', 'ุงูุฒูุงุฉ ููุท', 'ุงูุตูู ููุท'],
      0,
      'ุชุฑู ููู ุตูุงุช ุงููู ูุญููู ุจูุง ุชุนุทูู.'
    ),
    createShuffledQuestion(
      'ูู ุงูููุงุฆูุฉ ุฌูุณ ูุฎูููุ',
      ['ูุนูุ ูุฎูููุฉ ูู ููุฑ', 'ูุง', 'ุฌุฒุฆููุง', 'ูุดููู ููู'],
      0,
      'ูุนูุ ูุฎูููุฉ ูู ููุฑ.'
    ),
    createShuffledQuestion(
      'ูู ุงูุฌู ูุฎููู ูุซููุงุ',
      ['ูุนูุ ูุฎููููู ูู ูุงุฑ', 'ูุง', 'ุฌุฒุฆููุง', 'ูุดููู ููู'],
      0,
      'ูุนูุ ูุฎููููู ูู ูุงุฑ.'
    ),
    createShuffledQuestion(
      'ูุงูู ุงูุฅููุงู ุจุงููุถุงุกุ',
      ['ุงูุชุตุฏูู ุจุฃู ุงููู ููุฏุฑ ุงูุฃุญุฏุงุซ', 'ุงูุตูุงุฉ ููุท', 'ุงูุฒูุงุฉ ููุท', 'ุงูุตูู ููุท'],
      0,
      'ุงูุฅููุงู ุจุฃู ุงููู ููุฏุฑ ุงูุฃุญุฏุงุซ.'
    ),
    createShuffledQuestion(
      'ูู ุงูุฑุณูู ๏ทบ ูุนููู ุงููู ุงูุบูุจุ',
      ['ูุงุ ููุท ููุนููู ุจูุง ุดุงุก ูู ุงูุนูู ุงูุดุฑุนู', 'ูุนูุ ูู ุงูุบูุจ', 'ุฌุฒุฆููุง', 'ูุดููู ููู'],
      0,
      'ูุงุ ููุท ููุนููู ุจูุง ุดุงุก ูู ุงูุนูู ุงูุดุฑุนู.'
    ),
    createShuffledQuestion(
      'ูู ุงูุชูุญูุฏ ูุดูู ุงูุฃุณูุงุก ูุงูุตูุงุชุ',
      ['ูุนูุ ูุฃูู ุงูุชูุญูุฏ ุงููุงูู ููู', 'ูุง', 'ุฌุฒุฆููุง', 'ูุดููู ููู'],
      0,
      'ูุนูุ ูุฃูู ุงูุชูุญูุฏ ุงููุงูู ููู.'
    ),
  ],
  seerah: [
    createShuffledQuestion(
      'ูู ูู ุฃูู ูู ุขูู ุจุฑุณูู ุงููู ุตูู ุงููู ุนููู ูุณูู ูู ุงูุฑุฌุงูุ',
      ['ุฃุจู ุจูุฑ ุงูุตุฏูู', 'ุนูุฑ ุจู ุงูุฎุทุงุจ', 'ุนูู ุจู ุฃุจู ุทุงูุจ', 'ุนุซูุงู ุจู ุนูุงู'],
      2,
      'ุฃูู ูู ุขูู ูู ุงูุฑุฌุงู ูู ุนูู ุจู ุฃุจู ุทุงูุจ. (ุณูุฑุฉ ุงุจู ูุดุงู)'
    ),
    createShuffledQuestion(
      'ููุฏ ุงููุจู ูุญูุฏ ุตูู ุงููู ุนููู ูุณูู ูู ููุฉ.',
      ['ุตุญ', 'ุฎุทุฃ'],
      0,
      'ุงููุจู ูุญูุฏ ูููุฏ ูู ููุฉ ุงูููุฑูุฉ.'
    ),
    createShuffledQuestion(
      'ุฃููู: ุบุฒูุฉ ุจุฏุฑ ูุงูุช ูู ุงูุณูุฉ ___ ูููุฌุฑุฉ',
      ['ุงูุซุงููุฉ', 'ุงูุซุงูุซุฉ', 'ุงูุฑุงุจุนุฉ', 'ุงูุฎุงูุณุฉ'],
      0,
      'ุบุฒูุฉ ุจุฏุฑ ูุงูุช ูู ุงูุณูุฉ ุงูุซุงููุฉ ูููุฌุฑุฉ.'
    ),
    createShuffledQuestion(
      'ูุง ุงุณู ูุฐุง ุงูุฌุจู ุงูุฐู ููู ุนููู ุงููุจู ูู ููุฉุ',
      ['ุฌุจู ุฃุญุฏ', 'ุฌุจู ุงูููุฑ', 'ุฌุจู ุซูุฑ', 'ุฌุจู ุงูุฑุญูุฉ'],
      1,
      'ุฌุจู ุงูููุฑ ูู ุงูุฐู ููู ุบุงุฑ ุญุฑุงุก.'
    ),
    createShuffledQuestion(
      'ูู ูุงู ุนูุฑ ุงููุจู ุนูุฏ ุงูุจุนุซุฉุ',
      ['30', '35', '40', '45'],
      2,
      'ุจุนุซ ุงููุจู ูุญูุฏ ุตูู ุงููู ุนููู ูุณูู ูุนูุฑู 40 ุณูุฉ.'
    ),
  ],
  quran: [
    createShuffledQuestion(
      'ูุง ูู ุฃุทูู ุณูุฑุฉ ูู ุงููุฑุขู ุงููุฑููุ',
      ['ุงูุจูุฑุฉ', 'ุขู ุนูุฑุงู', 'ุงููุณุงุก', 'ุงููุงุฆุฏุฉ'],
      0,
      'ุฃุทูู ุณูุฑุฉ ูู ุงููุฑุขู ูู ุณูุฑุฉ ุงูุจูุฑุฉ.'
    ),
    createShuffledQuestion(
      'ุณูุฑุฉ ุงูุฅุฎูุงุต ุชุชููู ูู 4 ุขูุงุช ููุท.',
      ['ุตุญ', 'ุฎุทุฃ'],
      0,
      'ุณูุฑุฉ ุงูุฅุฎูุงุต ุชุชููู ูู 4 ุขูุงุช.'
    ),
    createShuffledQuestion(
      'ุฃููู: ุฃูู ุขูุฉ ูู ุงููุฑุขู ูู ___',
      ['ุจุณู ุงููู ุงูุฑุญูู ุงูุฑุญูู', 'ุงูุฑุฃ ุจุงุณู ุฑุจู ุงูุฐู ุฎูู', 'ุงูุญูุฏ ููู ุฑุจ ุงูุนุงูููู', 'ูู ูู ุงููู ุฃุญุฏ'],
      0,
      'ุฃูู ุขูุฉ ูู ุงููุตุญู: ุจุณู ุงููู ุงูุฑุญูู ุงูุฑุญูู.'
    ),
    createShuffledQuestion(
      'ูุง ุงุณู ูุฐู ุงูุณูุฑุฉุ',
      ['ุงููุงุชุญุฉ', 'ุงูุจูุฑุฉ', 'ุงูููุซุฑ', 'ุงูุฅุฎูุงุต'],
      0,
      'ูุฐู ุตูุฑุฉ ุจุฏุงูุฉ ุณูุฑุฉ ุงููุงุชุญุฉ.'
    ),
    createShuffledQuestion(
      'ูู ุนุฏุฏ ุฃุฌุฒุงุก ุงููุฑุขู ุงููุฑููุ',
      ['20', '30', '40', '60'],
      1,
      'ุงููุฑุขู ุงููุฑูู 30 ุฌุฒุกุงู.'
    ),
  ],
  hadith: [
    createShuffledQuestion(
      'ูุง ุงูุญุฏูุซ ุงูุฐู ููุนุฏู ุฃุณุงุณูุง ูู ุงูููุฉุ',
      ['ุฅููุง ุงูุฃุนูุงู ุจุงูููุงุช', 'ุงูุฏูู ุงููุตูุญุฉ', 'ุฃูุดูุง ุงูุณูุงู ุจูููู', 'ุงูุตูุงุฉ ููุฑ'],
      0,
      'ุญุฏูุซ "ุฅููุง ุงูุฃุนูุงู ุจุงูููุงุช" ูู ุฃุณุงุณ ูู ุงูููุฉ.'
    ),
    createShuffledQuestion(
      'ูุง ุงูุญุฏูุซ ุงูุฐู ูุฌูุน ุฃุฑูุงู ุงูุฅุณูุงูุ',
      ['ุญุฏูุซ ุฌุจุฑูู ุนููู ุงูุณูุงู', 'ุญุฏูุซ ุงูููุฉ', 'ุญุฏูุซ ุงูุตุฏู', 'ุญุฏูุซ ุงูุฃูุงูุฉ'],
      0,
      'ุญุฏูุซ ุฌุจุฑูู ุนููู ุงูุณูุงู ูุฌูุน ุฃุฑูุงู ุงูุฅุณูุงู.'
    ),
    createShuffledQuestion(
      'ูุง ุงูุญุฏูุซ ุงูุฐู ููุตู ุจุญุณู ุงูุฎููุ',
      ['ุฅู ูู ุฎูุงุฑูู ุฃุญุณููู ุฃุฎูุงููุง', 'ุงูุฏูู ุงููุตูุญุฉ', 'ุฃูุดูุง ุงูุณูุงู ุจูููู', 'ุงูุตูุงุฉ ููุฑ'],
      0,
      'ุญุฏูุซ "ุฅู ูู ุฎูุงุฑูู ุฃุญุณููู ุฃุฎูุงููุง" ููุตู ุจุญุณู ุงูุฎูู.'
    ),
    createShuffledQuestion(
      'ูุง ุงูุญุฏูุซ ุงูุฐู ููุญุฐุฑ ูู ุงููุฐุจุ',
      ['ุฅูุงูู ูุงููุฐุจุ ูุฅู ุงููุฐุจ ููุฏู ุฅูู ุงููุฌูุฑ', 'ุงูุฏูู ุงููุตูุญุฉ', 'ุฃูุดูุง ุงูุณูุงู ุจูููู', 'ุงูุตูุงุฉ ููุฑ'],
      0,
      'ุญุฏูุซ "ุฅูุงูู ูุงููุฐุจุ ูุฅู ุงููุฐุจ ููุฏู ุฅูู ุงููุฌูุฑ" ูุญุฐุฑ ูู ุงููุฐุจ.'
    ),
    createShuffledQuestion(
      'ูุง ุงูุญุฏูุซ ุงูุฐู ูุญุซ ุนูู ุงูุตุฏูุ',
      ['ุนูููู ุจุงูุตุฏูุ ูุฅู ุงูุตุฏู ููุฏู ุฅูู ุงูุจุฑ', 'ุงูุฏูู ุงููุตูุญุฉ', 'ุฃูุดูุง ุงูุณูุงู ุจูููู', 'ุงูุตูุงุฉ ููุฑ'],
      0,
      'ุญุฏูุซ "ุนูููู ุจุงูุตุฏูุ ูุฅู ุงูุตุฏู ููุฏู ุฅูู ุงูุจุฑ" ูุญุซ ุนูู ุงูุตุฏู.'
    ),
    createShuffledQuestion(
      'ูุง ุงูุญุฏูุซ ุงูุฐู ููู ูุถู ุงูุฃูุ',
      ['ุฃูู ุซู ุฃูู ุซู ุฃูู', 'ุงูุฏูู ุงููุตูุญุฉ', 'ุฃูุดูุง ุงูุณูุงู ุจูููู', 'ุงูุตูุงุฉ ููุฑ'],
      0,
      'ุญุฏูุซ "ุฃูู ุซู ุฃูู ุซู ุฃูู" ูุจูู ูุถู ุงูุฃู.'
    ),
    createShuffledQuestion(
      'ูุง ุงูุญุฏูุซ ุงูุฐู ูููู ุนู ุงูุบุถุจุ',
      ['ูุง ุชุบุถุจ', 'ุงูุฏูู ุงููุตูุญุฉ', 'ุฃูุดูุง ุงูุณูุงู ุจูููู', 'ุงูุตูุงุฉ ููุฑ'],
      0,
      'ุญุฏูุซ "ูุง ุชุบุถุจ" ูููู ุนู ุงูุบุถุจ.'
    ),
    createShuffledQuestion(
      'ูุง ุงูุญุฏูุซ ุงูุฐู ูุญุซ ุนูู ุฅูุงุทุฉ ุงูุฃุฐูุ',
      ['ุฅูุงุทุฉ ุงูุฃุฐู ุนู ุงูุทุฑูู ุตุฏูุฉ', 'ุงูุฏูู ุงููุตูุญุฉ', 'ุฃูุดูุง ุงูุณูุงู ุจูููู', 'ุงูุตูุงุฉ ููุฑ'],
      0,
      'ุญุฏูุซ "ุฅูุงุทุฉ ุงูุฃุฐู ุนู ุงูุทุฑูู ุตุฏูุฉ" ูุญุซ ุนูู ุฅูุงุทุฉ ุงูุฃุฐู.'
    ),
    createShuffledQuestion(
      'ูุง ุงูุญุฏูุซ ุงูุฐู ููู ูุถู ุงูุนููุ',
      ['ูู ุณูู ุทุฑูููุง ููุชูุณ ููู ุนูููุง', 'ุงูุฏูู ุงููุตูุญุฉ', 'ุฃูุดูุง ุงูุณูุงู ุจูููู', 'ุงูุตูุงุฉ ููุฑ'],
      0,
      'ุญุฏูุซ "ูู ุณูู ุทุฑูููุง ููุชูุณ ููู ุนูููุง" ูุจูู ูุถู ุงูุนูู.'
    ),
    createShuffledQuestion(
      'ูุง ุงูุญุฏูุซ ุงูุฐู ูุฏู ุนูู ููุฉ ุงูุฎูุฑุ',
      ['ูู ููู ุจุญุณูุฉ ููู ูุนูููุง ูุชุจูุง ุงููู ูู ุญุณูุฉ', 'ุงูุฏูู ุงููุตูุญุฉ', 'ุฃูุดูุง ุงูุณูุงู ุจูููู', 'ุงูุตูุงุฉ ููุฑ'],
      0,
      'ุญุฏูุซ "ูู ููู ุจุญุณูุฉ ููู ูุนูููุง ูุชุจูุง ุงููู ูู ุญุณูุฉ" ูุฏู ุนูู ููุฉ ุงูุฎูุฑ.'
    ),
    createShuffledQuestion(
      'ูุง ุงูุญุฏูุซ ุนู ูุถู ุงูุตูุงุฉุ',
      ['ุงูุตูุงุฉ ููุฑ', 'ุงูุฏูู ุงููุตูุญุฉ', 'ุฃูุดูุง ุงูุณูุงู ุจูููู', 'ุฅูุงุทุฉ ุงูุฃุฐู ุตุฏูุฉ'],
      0,
      'ุญุฏูุซ "ุงูุตูุงุฉ ููุฑ" ูุจูู ูุถู ุงูุตูุงุฉ.'
    ),
    createShuffledQuestion(
      'ูุง ุงูุญุฏูุซ ุงูุฐู ููุนุธู ุงูุฃูุงูุฉุ',
      ['ุฃุฏูู ุงูุฃูุงูุฉ ุฅูู ูู ุงุฆุชููู', 'ุงูุฏูู ุงููุตูุญุฉ', 'ุฃูุดูุง ุงูุณูุงู ุจูููู', 'ุงูุตูุงุฉ ููุฑ'],
      0,
      'ุญุฏูุซ "ุฃุฏูู ุงูุฃูุงูุฉ ุฅูู ูู ุงุฆุชููู" ูุนุธู ุงูุฃูุงูุฉ.'
    ),
    createShuffledQuestion(
      'ูุง ุงูุญุฏูุซ ุงูุฐู ูุญุฐุฑ ูู ุงูุบุดุ',
      ['ูู ุบุดูุง ูููุณ ููุง', 'ุงูุฏูู ุงููุตูุญุฉ', 'ุฃูุดูุง ุงูุณูุงู ุจูููู', 'ุงูุตูุงุฉ ููุฑ'],
      0,
      'ุญุฏูุซ "ูู ุบุดูุง ูููุณ ููุง" ูุญุฐุฑ ูู ุงูุบุด.'
    ),
    createShuffledQuestion(
      'ูุง ุงูุญุฏูุซ ุงูุฐู ูุจูู ุฃูููุฉ ุงูููุฉุ',
      ['ุฅููุง ุงูุฃุนูุงู ุจุงูููุงุช', 'ุงูุฏูู ุงููุตูุญุฉ', 'ุฃูุดูุง ุงูุณูุงู ุจูููู', 'ุงูุตูุงุฉ ููุฑ'],
      0,
      'ุญุฏูุซ "ุฅููุง ุงูุฃุนูุงู ุจุงูููุงุช" ูุจูู ุฃูููุฉ ุงูููุฉ.'
    ),
    createShuffledQuestion(
      'ูุง ุงูุญุฏูุซ ุงูุฐู ููุตู ุจุงูุฅุญุณุงูุ',
      ['ุฅู ุงููู ูุชุจ ุงูุฅุญุณุงู ุนูู ูู ุดูุก', 'ุงูุฏูู ุงููุตูุญุฉ', 'ุฃูุดูุง ุงูุณูุงู ุจูููู', 'ุงูุตูุงุฉ ููุฑ'],
      0,
      'ุญุฏูุซ "ุฅู ุงููู ูุชุจ ุงูุฅุญุณุงู ุนูู ูู ุดูุก" ููุตู ุจุงูุฅุญุณุงู.'
    ),
    createShuffledQuestion(
      'ูุง ุงูุญุฏูุซ ุนู ูุถู ุฅูุดุงุก ุงูุณูุงูุ',
      ['ุฃูุดูุง ุงูุณูุงู ุจูููู', 'ุงูุฏูู ุงููุตูุญุฉ', 'ุฅููุง ุงูุฃุนูุงู ุจุงูููุงุช', 'ุงูุตูุงุฉ ููุฑ'],
      0,
      'ุญุฏูุซ "ุฃูุดูุง ุงูุณูุงู ุจูููู" ูุจูู ูุถู ุฅูุดุงุก ุงูุณูุงู.'
    ),
    createShuffledQuestion(
      'ูุง ุงูุญุฏูุซ ุงูุฐู ูุฏู ุนูู ุฃู ุงูุฏูู ุงููุตูุญุฉุ',
      ['ุงูุฏูู ุงููุตูุญุฉ', 'ุฃูุดูุง ุงูุณูุงู ุจูููู', 'ุฅููุง ุงูุฃุนูุงู ุจุงูููุงุช', 'ุงูุตูุงุฉ ููุฑ'],
      0,
      'ุญุฏูุซ "ุงูุฏูู ุงููุตูุญุฉ" ูุฏู ุนูู ุฃู ุงูุฏูู ุงููุตูุญุฉ.'
    ),
    createShuffledQuestion(
      'ูุง ุงูุญุฏูุซ ุนู ุงูุฑููุ',
      ['ูุง ูุงู ุงูุฑูู ูู ุดูุก ุฅูุง ุฒุงูู', 'ุงูุฏูู ุงููุตูุญุฉ', 'ุฃูุดูุง ุงูุณูุงู ุจูููู', 'ุงูุตูุงุฉ ููุฑ'],
      0,
      'ุญุฏูุซ "ูุง ูุงู ุงูุฑูู ูู ุดูุก ุฅูุง ุฒุงูู" ูุจูู ูุถู ุงูุฑูู.'
    ),
    createShuffledQuestion(
      'ูุง ุงูุญุฏูุซ ุงูุฐู ูุญุฐุฑ ูู ุงูุธููุ',
      ['ุงูุธูู ุธููุงุช ููู ุงูููุงูุฉ', 'ุงูุฏูู ุงููุตูุญุฉ', 'ุฃูุดูุง ุงูุณูุงู ุจูููู', 'ุงูุตูุงุฉ ููุฑ'],
      0,
      'ุญุฏูุซ "ุงูุธูู ุธููุงุช ููู ุงูููุงูุฉ" ูุญุฐุฑ ูู ุงูุธูู.'
    ),
    createShuffledQuestion(
      'ูุง ุงูุญุฏูุซ ุงูุฐู ูุจูู ูู ูู ุงููููุณุ',
      ['ุงููููุณ ูู ุฃูุชู ูู ูุฃุชู ููู ุงูููุงูุฉ', 'ุงูุฏูู ุงููุตูุญุฉ', 'ุฃูุดูุง ุงูุณูุงู ุจูููู', 'ุงูุตูุงุฉ ููุฑ'],
      0,
      'ุญุฏูุซ "ุงููููุณ ูู ุฃูุชู ูู ูุฃุชู ููู ุงูููุงูุฉ" ูุจูู ูู ูู ุงููููุณ.'
    ),
    createShuffledQuestion(
      'ูุง ุงูุญุฏูุซ ุงูุฐู ููุตู ุจุญู ุงูุฌุงุฑุ',
      ['ูุง ุฒุงู ุฌุจุฑูู ููุตููู ุจุงูุฌุงุฑ', 'ุงูุฏูู ุงููุตูุญุฉ', 'ุฃูุดูุง ุงูุณูุงู ุจูููู', 'ุงูุตูุงุฉ ููุฑ'],
      0,
      'ุญุฏูุซ "ูุง ุฒุงู ุฌุจุฑูู ููุตููู ุจุงูุฌุงุฑ" ููุตู ุจุญู ุงูุฌุงุฑ.'
    ),
    createShuffledQuestion(
      'ูุง ุงูุญุฏูุซ ุงูุฐู ูููู ุนู ุงูุญุณุฏุ',
      ['ูุง ุชุญุงุณุฏูุง', 'ุงูุฏูู ุงููุตูุญุฉ', 'ุฃูุดูุง ุงูุณูุงู ุจูููู', 'ุงูุตูุงุฉ ููุฑ'],
      0,
      'ุญุฏูุซ "ูุง ุชุญุงุณุฏูุง" ูููู ุนู ุงูุญุณุฏ.'
    ),
    createShuffledQuestion(
      'ูุง ุงูุญุฏูุซ ุนู ูุถู ุงูุฐูุฑุ',
      ['ุฃูุง ุฃูุจุฆูู ุจุฎูุฑ ุฃุนูุงููู', 'ุงูุฏูู ุงููุตูุญุฉ', 'ุฃูุดูุง ุงูุณูุงู ุจูููู', 'ุงูุตูุงุฉ ููุฑ'],
      0,
      'ุญุฏูุซ "ุฃูุง ุฃูุจุฆูู ุจุฎูุฑ ุฃุนูุงููู" ูุจูู ูุถู ุงูุฐูุฑ.'
    ),
    createShuffledQuestion(
      'ูุง ุงูุญุฏูุซ ุนู ุงูุตุฏูุฉุ',
      ['ุงูุตุฏูุฉ ุชุทูุฆ ุงูุฎุทูุฆุฉ ููุง ูุทูุฆ ุงููุงุก ุงููุงุฑ', 'ุงูุฏูู ุงููุตูุญุฉ', 'ุฃูุดูุง ุงูุณูุงู ุจูููู', 'ุงูุตูุงุฉ ููุฑ'],
      0,
      'ุญุฏูุซ "ุงูุตุฏูุฉ ุชุทูุฆ ุงูุฎุทูุฆุฉ ููุง ูุทูุฆ ุงููุงุก ุงููุงุฑ" ูุจูู ูุถู ุงูุตุฏูุฉ.'
    ),
    createShuffledQuestion(
      'ูุง ุงูุญุฏูุซ ุนู ุตูุฉ ุงูุฑุญูุ',
      ['ูู ุฃุญุจ ุฃู ููุจุณุท ูู ูู ุฑุฒูู', 'ุงูุฏูู ุงููุตูุญุฉ', 'ุฃูุดูุง ุงูุณูุงู ุจูููู', 'ุงูุตูุงุฉ ููุฑ'],
      0,
      'ุญุฏูุซ "ูู ุฃุญุจ ุฃู ููุจุณุท ูู ูู ุฑุฒูู" ูุจูู ูุถู ุตูุฉ ุงูุฑุญู.'
    ),
    createShuffledQuestion(
      'ูุง ุงูุญุฏูุซ ุนู ุจุฑ ุงููุงูุฏููุ',
      ['ุฑุบู ุฃูู ูู ุฃุฏุฑู ูุงูุฏูู ููู ูุฏุฎู ุงูุฌูุฉ', 'ุงูุฏูู ุงููุตูุญุฉ', 'ุฃูุดูุง ุงูุณูุงู ุจูููู', 'ุงูุตูุงุฉ ููุฑ'],
      0,
      'ุญุฏูุซ "ุฑุบู ุฃูู ูู ุฃุฏุฑู ูุงูุฏูู ููู ูุฏุฎู ุงูุฌูุฉ" ูุจูู ูุถู ุจุฑ ุงููุงูุฏูู.'
    ),
    createShuffledQuestion(
      'ูุง ุงูุญุฏูุซ ุนู ูุถู ูููุฉ ุงููุฏุฑุ',
      ['ูู ูุงู ูููุฉ ุงููุฏุฑ ุฅููุงููุง ูุงุญุชุณุงุจูุง', 'ุงูุฏูู ุงููุตูุญุฉ', 'ุฃูุดูุง ุงูุณูุงู ุจูููู', 'ุงูุตูุงุฉ ููุฑ'],
      0,
      'ุญุฏูุซ "ูู ูุงู ูููุฉ ุงููุฏุฑ ุฅููุงููุง ูุงุญุชุณุงุจูุง" ูุจูู ูุถู ูููุฉ ุงููุฏุฑ.'
    ),
    createShuffledQuestion(
      'ูุง ุงูุญุฏูุซ ุนู ูุถู ุฑูุถุงูุ',
      ['ูู ุตุงู ุฑูุถุงู ุฅููุงููุง ูุงุญุชุณุงุจูุง', 'ุงูุฏูู ุงููุตูุญุฉ', 'ุฃูุดูุง ุงูุณูุงู ุจูููู', 'ุงูุตูุงุฉ ููุฑ'],
      0,
      'ุญุฏูุซ "ูู ุตุงู ุฑูุถุงู ุฅููุงููุง ูุงุญุชุณุงุจูุง" ูุจูู ูุถู ุฑูุถุงู.'
    ),
    createShuffledQuestion(
      'ูุง ุงูุญุฏูุซ ุนู ูุถู ุงูุฏุนุงุกุ',
      ['ุงูุฏุนุงุก ูู ุงูุนุจุงุฏุฉ', 'ุงูุฏูู ุงููุตูุญุฉ', 'ุฃูุดูุง ุงูุณูุงู ุจูููู', 'ุงูุตูุงุฉ ููุฑ'],
      0,
      'ุญุฏูุซ "ุงูุฏุนุงุก ูู ุงูุนุจุงุฏุฉ" ูุจูู ูุถู ุงูุฏุนุงุก.'
    ),
    createShuffledQuestion(
      'ูุง ุงูุญุฏูุซ ุนู ุงูุชูุจุฉุ',
      ['ุงูุชุงุฆุจ ูู ุงูุฐูุจ ููู ูุง ุฐูุจ ูู', 'ุงูุฏูู ุงููุตูุญุฉ', 'ุฃูุดูุง ุงูุณูุงู ุจูููู', 'ุงูุตูุงุฉ ููุฑ'],
      0,
      'ุญุฏูุซ "ุงูุชุงุฆุจ ูู ุงูุฐูุจ ููู ูุง ุฐูุจ ูู" ูุจูู ูุถู ุงูุชูุจุฉ.'
    ),
    createShuffledQuestion(
      'ูุง ุงูุญุฏูุซ ุนู ุบุถ ุงูุจุตุฑุ',
      ['ุงูุนููุงู ุชุฒููุงู ูุฒูุงููุง ุงููุธุฑ', 'ุงูุฏูู ุงููุตูุญุฉ', 'ุฃูุดูุง ุงูุณูุงู ุจูููู', 'ุงูุตูุงุฉ ููุฑ'],
      0,
      'ุญุฏูุซ "ุงูุนููุงู ุชุฒููุงู ูุฒูุงููุง ุงููุธุฑ" ูุจูู ุฃูููุฉ ุบุถ ุงูุจุตุฑ.'
    ),
    createShuffledQuestion(
      'ูุง ุงูุญุฏูุซ ุนู ุงูุนููุ',
      ['ุฅู ุงููู ูุญุจ ุฅุฐุง ุนูู ุฃุญุฏูู ุนููุงู ุฃู ูุชููู', 'ุงูุฏูู ุงููุตูุญุฉ', 'ุฃูุดูุง ุงูุณูุงู ุจูููู', 'ุงูุตูุงุฉ ููุฑ'],
      0,
      'ุญุฏูุซ "ุฅู ุงููู ูุญุจ ุฅุฐุง ุนูู ุฃุญุฏูู ุนููุงู ุฃู ูุชููู" ูุจูู ุฃูููุฉ ุฅุชูุงู ุงูุนูู.'
    ),
    createShuffledQuestion(
      'ูุง ุงูุญุฏูุซ ุนู ุงูุญูุงุกุ',
      ['ุงูุญูุงุก ูุง ูุฃุชู ุฅูุง ุจุฎูุฑ', 'ุงูุฏูู ุงููุตูุญุฉ', 'ุฃูุดูุง ุงูุณูุงู ุจูููู', 'ุงูุตูุงุฉ ููุฑ'],
      0,
      'ุญุฏูุซ "ุงูุญูุงุก ูุง ูุฃุชู ุฅูุง ุจุฎูุฑ" ูุจูู ูุถู ุงูุญูุงุก.'
    ),
    createShuffledQuestion(
      'ูุง ุงูุญุฏูุซ ุนู ุงูุฅููุงูุ',
      ['ุงูุฅููุงู ุจุถุน ูุณุจุนูู ุดุนุจุฉ', 'ุงูุฏูู ุงููุตูุญุฉ', 'ุฃูุดูุง ุงูุณูุงู ุจูููู', 'ุงูุตูุงุฉ ููุฑ'],
      0,
      'ุญุฏูุซ "ุงูุฅููุงู ุจุถุน ูุณุจุนูู ุดุนุจุฉ" ูุจูู ุดุนุจ ุงูุฅููุงู.'
    ),
    createShuffledQuestion(
      'ูุง ุงูุญุฏูุซ ุนู ุงูุฌูุฉุ',
      ['ูู ุงูุฌูุฉ ูุง ูุง ุนูู ุฑุฃุช ููุง ุฃุฐู ุณูุนุช', 'ุงูุฏูู ุงููุตูุญุฉ', 'ุฃูุดูุง ุงูุณูุงู ุจูููู', 'ุงูุตูุงุฉ ููุฑ'],
      0,
      'ุญุฏูุซ "ูู ุงูุฌูุฉ ูุง ูุง ุนูู ุฑุฃุช ููุง ุฃุฐู ุณูุนุช" ูุจูู ูุนูู ุงูุฌูุฉ.'
    ),
    createShuffledQuestion(
      'ูุง ุงูุญุฏูุซ ุนู ุงููุงุฑุ',
      ['ุฃูุซุฑ ูุง ููุฏุฎู ุงููุงุณ ุงููุงุฑ ุงููู ูุงููุฑุฌ', 'ุงูุฏูู ุงููุตูุญุฉ', 'ุฃูุดูุง ุงูุณูุงู ุจูููู', 'ุงูุตูุงุฉ ููุฑ'],
      0,
      'ุญุฏูุซ "ุฃูุซุฑ ูุง ููุฏุฎู ุงููุงุณ ุงููุงุฑ ุงููู ูุงููุฑุฌ" ูุญุฐุฑ ูู ุงููุนุงุตู.'
    ),
    createShuffledQuestion(
      'ูุง ุงูุญุฏูุซ ุนู ุงููุฑูุกุฉุ',
      ['ููุณ ููุง ูู ูู ูููุฑ ูุจูุฑูุง', 'ุงูุฏูู ุงููุตูุญุฉ', 'ุฃูุดูุง ุงูุณูุงู ุจูููู', 'ุงูุตูุงุฉ ููุฑ'],
      0,
      'ุญุฏูุซ "ููุณ ููุง ูู ูู ูููุฑ ูุจูุฑูุง" ูุจูู ุฃูููุฉ ุงููุฑูุกุฉ.'
    ),
    createShuffledQuestion(
      'ูุง ุงูุญุฏูุซ ุนู ุงูุณูุงูุ',
      ['ูุณูู ุงูุฑุงูุจ ุนูู ุงููุงุดู', 'ุงูุฏูู ุงููุตูุญุฉ', 'ุฃูุดูุง ุงูุณูุงู ุจูููู', 'ุงูุตูุงุฉ ููุฑ'],
      0,
      'ุญุฏูุซ "ูุณูู ุงูุฑุงูุจ ุนูู ุงููุงุดู" ูุจูู ุขุฏุงุจ ุงูุณูุงู.'
    ),
    createShuffledQuestion(
      'ูุง ุงูุญุฏูุซ ุนู ูุถู ุณูุฑุฉ ุงููุงุชุญุฉุ',
      ['ูุง ุฃูุฒู ูู ุงูุชูุฑุงุฉ ููุง ูู ุงูุฅูุฌูู ูุซููุง', 'ุงูุฏูู ุงููุตูุญุฉ', 'ุฃูุดูุง ุงูุณูุงู ุจูููู', 'ุงูุตูุงุฉ ููุฑ'],
      0,
      'ุญุฏูุซ "ูุง ุฃูุฒู ูู ุงูุชูุฑุงุฉ ููุง ูู ุงูุฅูุฌูู ูุซููุง" ูุจูู ูุถู ุณูุฑุฉ ุงููุงุชุญุฉ.'
    ),
    createShuffledQuestion(
      'ูุง ุงูุญุฏูุซ ุนู ุงูุดูุฑุ',
      ['ูู ูุง ูุดูุฑ ุงููุงุณ ูุง ูุดูุฑ ุงููู', 'ุงูุฏูู ุงููุตูุญุฉ', 'ุฃูุดูุง ุงูุณูุงู ุจูููู', 'ุงูุตูุงุฉ ููุฑ'],
      0,
      'ุญุฏูุซ "ูู ูุง ูุดูุฑ ุงููุงุณ ูุง ูุดูุฑ ุงููู" ูุจูู ุฃูููุฉ ุงูุดูุฑ.'
    ),
  ],
  mix: [] // ุณูุชู ููุคูุง ุชููุงุฆููุง ูู ุฌููุน ุงูุฃูุณุงู
};

// ุญุฐู ุฌููุน ุงูุฃุณุฆูุฉ ูู ููุน blank ูู ูู ุงูุฃูุณุงู ูู ุจูู ุงูุฃุณุฆูุฉ (ููุงุฆู)
Object.keys(questionsBank).forEach(section => {
  questionsBank[section] = questionsBank[section].filter(q => q.type === 'mcq' || q.type === 'tf');
});

// ุฏุงูุฉ ูุชุฑุชูุจ ุงูุฃุณุฆูุฉ ุนุดูุงุฆููุง
const shuffleQuestions = (questions) => {
  const shuffled = [...questions];
  for (let i = shuffled.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
  }
  return shuffled;
};

const getRandomQuestions = (arr, n = 5) => {
  const shuffled = shuffleQuestions(arr);
  return shuffled.slice(0, n);
};

const getLevel = (score) => {
  if (score >= 90) return 'ุนุงููู ูุญุชุฑู';
  if (score >= 70) return 'ุนุงููู ูุชูุณุท';
  if (score >= 50) return 'ุนุงููู ูุจุชุฏุฆ';
  return 'ุจุญุงุฌุฉ ูููุฒูุฏ';
};

const IslamicQuiz = () => {
  const [selectedSection, setSelectedSection] = useState(null);
  const [questions, setQuestions] = useState([]);
  const [current, setCurrent] = useState(0);
  const [userAnswers, setUserAnswers] = useState([]);
  const [score, setScore] = useState(0);
  const [showResult, setShowResult] = useState(false);
  const [showExplanation, setShowExplanation] = useState(false);
  const [explanation, setExplanation] = useState('');
  const [isCorrect, setIsCorrect] = useState(null);
  const [attempts, setAttempts] = useState(0);
  const [numQuestions, setNumQuestions] = useState(null);
  const [sectionQuestionsCount, setSectionQuestionsCount] = useState(0);
  const navigate = useNavigate();
  const { setPoints } = useContext(ChallengeContext);

  // ุจุฏุก ุงูุงุฎุชุจุงุฑ
  const startQuiz = () => {
    const qs = getRandomQuestions(questionsBank[selectedSection], numQuestions);
    setQuestions(qs);
    setCurrent(0);
    setUserAnswers([]);
    setScore(0);
    setShowResult(false);
    setShowExplanation(false);
    setExplanation('');
    setIsCorrect(null);
    setAttempts(0);
  };

  // ุงูุชุญูู ูู ุงูุฅุฌุงุจุฉ
  const checkAnswer = (answer) => {
    const q = questions[current];
    let correct = false;
    if (q.type === 'mcq') correct = answer === q.answer;
    if (q.type === 'tf') correct = answer === q.answer;
    if (q.type === 'blank') {
      const user = answer.trim().toLowerCase();
      const model = q.answer.trim().toLowerCase();
      if (user.length === 0) {
        correct = false;
      } else {
        correct = user.includes(model) || model.includes(user) || user.split(' ').some(w => model.includes(w));
      }
    }
    setIsCorrect(correct);
    setShowExplanation(true);
    setExplanation(q.explanation);
    setUserAnswers([...userAnswers, answer]);
    // ุงูููุงุท
    if (correct && attempts === 0) setScore(s => s + 10);
    else if (correct && attempts === 1) setScore(s => s + 5);
    setAttempts(0);
    setTimeout(() => {
      setShowExplanation(false);
      setIsCorrect(null);
      if (current + 1 < questions.length) {
        setCurrent(c => c + 1);
      } else {
        setShowResult(true);
      }
    }, 1800);
  };

  // ุฅุนุงุฏุฉ ุงููุญุงููุฉ
  const retry = () => {
    setSelectedSection(null);
    setQuestions([]);
    setCurrent(0);
    setUserAnswers([]);
    setScore(0);
    setShowResult(false);
    setShowExplanation(false);
    setExplanation('');
    setIsCorrect(null);
    setAttempts(0);
  };

  // ูุญุงููุฉ ุซุงููุฉ
  const tryAgain = () => setAttempts(a => a + 1);

  // ุนูุฏ ุธููุฑ ุงููุชูุฌุฉ ุงูููุงุฆูุฉุ ุงุญุณุจ ุงูููุงุท ุงููุนููุฉ
  useEffect(() => {
    if (showResult) {
      setPoints(score);
    }
  }, [showResult]);

  return (
    <Box sx={{ bgcolor: 'background.default', minHeight: '100vh', py: 4, px: 1 }} className="dark:bg-[#181c23] bg-gold-50">
      <Box maxWidth={600} mx="auto">
        <div className="rounded-2xl shadow-lg border-2 border-gold-500 bg-white dark:bg-[#23272f] p-6 text-gray-900 dark:text-white transition-colors duration-300">
          <Box display="flex" alignItems="center" gap={2} mb={2}>
            <MdOutlineQuiz size={32} color="#f59e0b" />
            <Typography variant="h5" fontWeight={700} color="gold.700">ุงููุณุงุจูุงุช ุงูุฅุณูุงููุฉ โ ุงุฎุชุจุฑ ูุนูููุงุชู</Typography>
          </Box>
          {/* ุงุฎุชูุงุฑ ุงููุณู ุฃููุงู */}
          {!selectedSection && (
            <>
              <Typography mb={2} fontWeight={600}>ุงุฎุชุฑ ูุณู ุงูุฃุณุฆูุฉ:</Typography>
              <Grid container spacing={2} justifyContent="center">
                {quizSections.map(sec => (
                  <Grid item key={sec.key}>
                    <Button
                      variant="outlined"
                      color="primary"
                      startIcon={sec.icon}
                      sx={{ minWidth: 150, fontWeight: 700, fontSize: 15, borderRadius: 3 }}
                      onClick={() => {
                        setSelectedSection(sec.key);
                        setSectionQuestionsCount(questionsBank[sec.key].length);
                        setNumQuestions(null);
                      }}
                    >
                      {sec.label}
                    </Button>
                  </Grid>
                ))}
              </Grid>
            </>
          )}
          {/* ุจุนุฏ ุงุฎุชูุงุฑ ุงููุณู: ุงุฎุชูุงุฑ ุนุฏุฏ ุงูุฃุณุฆูุฉ */}
          {selectedSection && !numQuestions && !showResult && (
            <>
              <Typography mb={2} fontWeight={600}>ุงุฎุชุฑ ุนุฏุฏ ุงูุฃุณุฆูุฉ:</Typography>
              <ButtonGroup>
                {[5, 10, 20, 40].filter(n => n <= sectionQuestionsCount).map(n => (
                  <Button
                    key={n}
                    variant={numQuestions === n ? 'contained' : 'outlined'}
                    color={numQuestions === n ? 'primary' : 'inherit'}
                    onClick={() => setNumQuestions(n)}
                  >
                    {n}
                  </Button>
                ))}
                {sectionQuestionsCount > 0 && ![5, 10, 20, 40].includes(sectionQuestionsCount) && (
                  <Button
                    key={sectionQuestionsCount}
                    variant={numQuestions === sectionQuestionsCount ? 'contained' : 'outlined'}
                    color={numQuestions === sectionQuestionsCount ? 'primary' : 'inherit'}
                    onClick={() => setNumQuestions(sectionQuestionsCount)}
                  >
                    {sectionQuestionsCount}
                  </Button>
                )}
              </ButtonGroup>
            </>
          )}
          {/* ุฒุฑ ุจุฏุก ุงููุณุงุจูุฉ ุจุนุฏ ุงุฎุชูุงุฑ ุงูุนุฏุฏ */}
          {selectedSection && numQuestions && !showResult && questions.length === 0 && (
            <Box mt={2} textAlign="center">
              <Button variant="contained" color="success" size="large" sx={{ fontWeight: 700, fontSize: 18, borderRadius: 3 }} onClick={startQuiz}>
                ุงุจุฏุฃ ุงููุณุงุจูุฉ
              </Button>
            </Box>
          )}
          {/* ุนุฑุถ ุงูุฃุณุฆูุฉ */}
          {questions.length > 0 && !showResult && (
            <Box>
              <Divider sx={{ my: 2 }} />
              <Typography fontWeight={700} mb={2}>ุณุคุงู {current + 1} ูู {questions.length}</Typography>
              <Typography mb={2} fontSize={18} fontWeight={600}>{questions[current].question}</Typography>
              {/* ููุน ุงูุณุคุงู */}
              {questions[current].type === 'mcq' && (
                <Grid container spacing={2}>
                  {questions[current].options.map((opt, idx) => (
                    <Grid item xs={12} sm={6} key={idx}>
                      <Button
                        fullWidth
                        variant="contained"
                        color="info"
                        sx={{ mb: 1, fontWeight: 700, borderRadius: 2 }}
                        onClick={() => checkAnswer(idx)}
                        disabled={showExplanation}
                      >
                        {opt}
                      </Button>
                    </Grid>
                  ))}
                </Grid>
              )}
              {questions[current].type === 'tf' && (
                <Box display="flex" gap={2}>
                  <Button variant="contained" color="success" onClick={() => checkAnswer(true)} disabled={showExplanation} sx={{ fontWeight: 700, borderRadius: 2 }}>โ ุตุญ</Button>
                  <Button variant="contained" color="error" onClick={() => checkAnswer(false)} disabled={showExplanation} sx={{ fontWeight: 700, borderRadius: 2 }}>โ ุฎุทุฃ</Button>
                </Box>
              )}
              {/* ุงูุชุตุญูุญ ุงูููุฑู */}
              {showExplanation && (
                <Fade in={showExplanation}>
                  <Box mt={2} p={2} bgcolor={isCorrect ? '#e8f5e9' : '#ffebee'} borderRadius={2} textAlign="center" fontWeight={700} color={isCorrect ? 'success.main' : 'error.main'} fontSize={18} boxShadow={2}>
                    {isCorrect ? 'โ ุฅุฌุงุจุฉ ุตุญูุญุฉ!' : 'โ ุฅุฌุงุจุฉ ุฎุงุทุฆุฉ'}
                    <Typography mt={1} color="text.secondary" fontSize={15}>{explanation}</Typography>
                    {!isCorrect && attempts === 0 && (
                      <Button variant="outlined" color="warning" sx={{ mt: 1 }} onClick={tryAgain}>ูุญุงููุฉ ุซุงููุฉ</Button>
                    )}
                  </Box>
                </Fade>
              )}
            </Box>
          )}
          {/* ุงููุชูุฌุฉ ุงูููุงุฆูุฉ */}
          {showResult && (
            <Box textAlign="center" mt={3}>
              <Typography variant="h6" fontWeight={700} color="success.main">๐ ูุชูุฌุชู: {score} / {questions.length * 10}</Typography>
              <Typography fontWeight={600} mt={1}>๐ ุฃูุช: "{getLevel((score / (questions.length * 10)) * 100)}"</Typography>
              <Typography fontWeight={600} mt={1}>๐ ุณุฌู ููุงุทู: {score} ููุทุฉ</Typography>
              <Button variant="contained" color="primary" sx={{ mt: 2, fontWeight: 700, borderRadius: 2, mx: 1 }} onClick={retry}>๐ ุงุฎุชุจุงุฑ ุฌุฏูุฏ</Button>
              <Button variant="outlined" color="secondary" sx={{ mt: 2, fontWeight: 700, borderRadius: 2, mx: 1 }} onClick={() => navigate('/challenges')}>๐ ุงูุฑุฌูุน ููุงุฆูุฉ ุงูุชุญุฏูุงุช</Button>
              <Button variant="outlined" color="success" sx={{ mt: 2, fontWeight: 700, borderRadius: 2, mx: 1 }} onClick={() => navigate('/challenges')}>๐ ุฑุคูุฉ ุงูุชุฑุชูุจ</Button>
            </Box>
          )}
        </div>
      </Box>
    </Box>
  );
};

export default IslamicQuiz; 